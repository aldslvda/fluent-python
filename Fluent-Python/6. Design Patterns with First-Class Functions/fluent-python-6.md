## Fluent Python ##
### Chapter 6. Design Patterns with First-Class Functions ###
### 第六章. 使用一等函数实现设计模式
这一章中会讲到设计模式的定义和适用场景，以及利用Python的一等函数特性对设计模式的实现。

#### 6.1 策略模式
合理利用作为一等函数的对象可以简化某些设计模式。
##### 6.1.1 经典的策略模式
《设计模式：可复用面向对象软件的基础》一书是这样概述“策略”模式的：

> 定义一系列算法，把它们一一封装起来，并且使它们可以相互替换。本模式使得算法
可以独立于使用它的客户而变化。


![1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.1.png?raw=true)

策略模式的一个经典的场景是商店的折扣策略，上图是这个场景的UML类图。具体场景如下:

> 假如一个网店制定了下述折扣规则:   
> - 有 1000 或以上积分的顾客，每个订单享 5% 折扣。   
> - 同一订单中，单个商品的数量达到 20 个或以上，享 10% 折扣。  
> - 订单中的不同商品达到 10 个或以上，享 7% 折扣。   
> - 简单起见，我们假定一个订单一次只能享用一个折扣。  

上面的UML图中:

- 上下文: 把一些计算委托给实现不同算法的可互换组件，提供服务。在这个电商示例中，上下文是 Order，它会根据不同的算法计算促销折扣。   
- 策略:实现不同算法的组件共同的接口。在这个示例中，名为 Promotion 的抽象类扮演这个角色。    
- 具体策略: "策略"的子类，fidelityPromo、BulkPromo 和LargeOrderPromo 是这里实现的三个具体策略。

上面的UML类图中，每个具体策略都是一个类，而且都只定义了一个方法，即 discount。此
外，策略实例没有状态（没有实例属性）。下面是使用Python对这个策略的重构，包括把具体策略用函数实现(而不是类)，取消了Promotion抽象类。